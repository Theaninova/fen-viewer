import{S as O,i as T,s as W,P as p,l as k,Q as x,a as b,d as f,b as i,g as y,J as v,t as z,h as B,n as R,R as S,T as C,j as $}from"./index-b452b8f2.js";const G="^(([rnbqkpRNBQKP]|\\d)+\\/){7}([rnbqkpRNBQKP]|\\d)+ [wb] (-|[kqKQ]{1,4}) (-|[a-h][1-8]) \\d+ \\d+$",H=new RegExp(G),P=new RegExp("[\u2659\u2656\u2658\u2657\u2655\u2654]"),I={p:"\u265F",n:"\u265E",b:"\u265D",r:"\u265C",q:"\u265B",k:"\u265A",P:"\u2659",N:"\u2658",B:"\u2657",R:"\u2656",Q:"\u2655",K:"\u2654"};function Z(a){return H.test(a)}function ee(a){const[t,l,e,n,c,r]=a.split(" ");return{board:t.split("/").map(h=>[...h].flatMap(m=>Number(m)?Array.from({length:Number(m)}):[I[m]])),turn:l,castling:e==="-"?void 0:[...e],enPassant:n==="-"?void 0:n,halfMoves:Number(c),fullMoves:Number(r)}}function M(a,t,l){const e=a.slice();return e[1]=t[l],e[3]=l,e}function q(a,t,l){const e=a.slice();return e[4]=t[l],e[6]=l,e}function Q(a,t,l){const e=a.slice();return e[3]=t[l],e}function A(a,t,l){const e=a.slice();return e[6]=t[l],e}function K(a){let t,l,e,n,c,r,h,m,N=[5,95],d=[];for(let o=0;o<2;o+=1)d[o]=F(Q(a,N,o));let _=a[0].board,u=[];for(let o=0;o<_.length;o+=1)u[o]=D(M(a,_,o));return{c(){t=p("svg"),l=p("defs"),e=p("pattern"),n=p("rect"),c=p("rect"),r=p("rect"),h=p("rect");for(let o=0;o<2;o+=1)d[o].c();m=k();for(let o=0;o<u.length;o+=1)u[o].c();this.h()},l(o){t=x(o,"svg",{xmlns:!0,viewBox:!0,class:!0});var g=b(t);l=x(g,"defs",{});var s=b(l);e=x(s,"pattern",{id:!0,width:!0,height:!0,patternUnits:!0});var w=b(e);n=x(w,"rect",{width:!0,height:!0,fill:!0}),b(n).forEach(f),c=x(w,"rect",{width:!0,height:!0,fill:!0,y:!0,x:!0}),b(c).forEach(f),w.forEach(f),s.forEach(f),r=x(g,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),b(r).forEach(f),h=x(g,"rect",{x:!0,y:!0,width:!0,height:!0,fill:!0}),b(h).forEach(f);for(let E=0;E<2;E+=1)d[E].l(g);m=k();for(let E=0;E<u.length;E+=1)u[E].l(g);g.forEach(f),this.h()},h(){i(n,"width","10"),i(n,"height","10"),i(n,"fill","#d7acac"),i(c,"width","10"),i(c,"height","10"),i(c,"fill","#d7acac"),i(c,"y","10"),i(c,"x","10"),i(e,"id","checkerboard"),i(e,"width","20"),i(e,"height","20"),i(e,"patternUnits","userSpaceOnUse"),i(r,"x","10"),i(r,"y","10"),i(r,"width","80"),i(r,"height","80"),i(r,"fill","#be8b89"),i(h,"x","10"),i(h,"y","10"),i(h,"width","80"),i(h,"height","80"),i(h,"fill","url(#checkerboard)"),i(t,"xmlns","http://www.w3.org/2000/svg"),i(t,"viewBox","0 0 100 100"),i(t,"class","svelte-uybd7z")},m(o,g){y(o,t,g),v(t,l),v(l,e),v(e,n),v(e,c),v(t,r),v(t,h);for(let s=0;s<2;s+=1)d[s].m(t,null);v(t,m);for(let s=0;s<u.length;s+=1)u[s].m(t,null)},p(o,g){if(g&0){N=[5,95];let s;for(s=0;s<2;s+=1){const w=Q(o,N,s);d[s]?d[s].p(w,g):(d[s]=F(w),d[s].c(),d[s].m(t,m))}for(;s<2;s+=1)d[s].d(1)}if(g&1){_=o[0].board;let s;for(s=0;s<_.length;s+=1){const w=M(o,_,s);u[s]?u[s].p(w,g):(u[s]=D(w),u[s].c(),u[s].m(t,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=_.length}},d(o){o&&f(t),S(d,o),S(u,o)}}}function U(a){let t,l=8-a[6]+"",e,n,c,r,h=String.fromCodePoint(a[6]+65)+"",m,N,d;return{c(){t=p("text"),e=z(l),r=p("text"),m=z(h),this.h()},l(_){t=x(_,"text",{x:!0,y:!0,"font-size":!0,fill:!0,"text-anchor":!0,"alignment-baseline":!0});var u=b(t);e=B(u,l),u.forEach(f),r=x(_,"text",{y:!0,x:!0,"font-size":!0,fill:!0,"text-anchor":!0,"alignment-baseline":!0});var o=b(r);m=B(o,h),o.forEach(f),this.h()},h(){i(t,"x",n=a[3]),i(t,"y",c=a[6]*10+15),i(t,"font-size","5px"),i(t,"fill","currentColor"),i(t,"text-anchor","middle"),i(t,"alignment-baseline","central"),i(r,"y",N=a[3]),i(r,"x",d=a[6]*10+15),i(r,"font-size","5px"),i(r,"fill","currentColor"),i(r,"text-anchor","middle"),i(r,"alignment-baseline","central")},m(_,u){y(_,t,u),v(t,e),y(_,r,u),v(r,m)},p:R,d(_){_&&f(t),_&&f(r)}}}function F(a){let t,l=Array.from({length:8}).map(J),e=[];for(let n=0;n<l.length;n+=1)e[n]=U(A(a,l,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=k()},l(n){for(let c=0;c<e.length;c+=1)e[c].l(n);t=k()},m(n,c){for(let r=0;r<e.length;r+=1)e[r].m(n,c);y(n,t,c)},p(n,c){if(c&0){l=Array.from({length:8}).map(J);let r;for(r=0;r<l.length;r+=1){const h=A(n,l,r);e[r]?e[r].p(h,c):(e[r]=U(h),e[r].c(),e[r].m(t.parentNode,t))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(n){S(e,n),n&&f(t)}}}function V(a){let t,l=a[4]+"",e,n,c;return{c(){t=p("text"),e=z(l),this.h()},l(r){t=x(r,"text",{y:!0,x:!0,"font-size":!0,draggable:!0,fill:!0,"text-anchor":!0,"alignment-baseline":!0,class:!0});var h=b(t);e=B(h,l),h.forEach(f),this.h()},h(){i(t,"y",n=a[3]*10+15),i(t,"x",c=a[6]*10+15),i(t,"font-size","7px"),i(t,"draggable","true"),i(t,"fill","currentColor"),i(t,"text-anchor","middle"),i(t,"alignment-baseline","central"),i(t,"class","svelte-uybd7z"),C(t,"white",P.test(a[4])),C(t,"black",!P.test(a[4]))},m(r,h){y(r,t,h),v(t,e)},p(r,h){h&1&&l!==(l=r[4]+"")&&$(e,l),h&1&&C(t,"white",P.test(r[4])),h&1&&C(t,"black",!P.test(r[4]))},d(r){r&&f(t)}}}function j(a){let t,l=a[4]&&V(a);return{c(){l&&l.c(),t=k()},l(e){l&&l.l(e),t=k()},m(e,n){l&&l.m(e,n),y(e,t,n)},p(e,n){e[4]?l?l.p(e,n):(l=V(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&f(t)}}}function D(a){let t,l=a[1],e=[];for(let n=0;n<l.length;n+=1)e[n]=j(q(a,l,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=k()},l(n){for(let c=0;c<e.length;c+=1)e[c].l(n);t=k()},m(n,c){for(let r=0;r<e.length;r+=1)e[r].m(n,c);y(n,t,c)},p(n,c){if(c&1){l=n[1];let r;for(r=0;r<l.length;r+=1){const h=q(n,l,r);e[r]?e[r].p(h,c):(e[r]=j(h),e[r].c(),e[r].m(t.parentNode,t))}for(;r<e.length;r+=1)e[r].d(1);e.length=l.length}},d(n){S(e,n),n&&f(t)}}}function L(a){let t,l=a[0]&&K(a);return{c(){l&&l.c(),t=k()},l(e){l&&l.l(e),t=k()},m(e,n){l&&l.m(e,n),y(e,t,n)},p(e,[n]){e[0]?l?l.p(e,n):(l=K(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},i:R,o:R,d(e){l&&l.d(e),e&&f(t)}}}const J=(a,t)=>t;function X(a,t,l){let{chessState:e}=t;return a.$$set=n=>{"chessState"in n&&l(0,e=n.chessState)},[e]}class te extends O{constructor(t){super(),T(this,t,X,L,W,{chessState:0})}}export{te as C,I as a,G as f,Z as i,ee as p};
